 <!--
 * @Author: sunhaolin@hotoa.com
 * @Date: 2022-05-04 16:44:32
 * @LastEditors: sunhaolin@hotoa.com
 * @LastEditTime: 2022-05-11 11:24:41
 * @Description:
-->
#Client field level encryption service

## Dependencies before enabling

- Install package `@steedos/ee_plugin-field-encryption`
- Run `createMasterKey.js` in the software package to generate the master key and configure it in `.env.local` as the value of `STEEDOS_CSFLE_MASTER_KEY`
- Please keep the master key properly. Losing the data encryption key will make all fields encrypted with this key permanently unreadable.

### Environment variables

- `process.env.STEEDOS_CSFLE_MASTER_KEY`: master key, generated by running `createMasterKey.js`
- `process.env.STEEDOS_CSFLE_ALT_KEY_NAME`: master key alias (optional), default steedos
- `process.env.STEEDOS_CSFLE_KEY_VAULT_DB`: Key vault library name (optional), default library connected in MONGO_URL
- `process.env.STEEDOS_CSFLE_KEY_VAULT_COLLECTION`: key vault table name (optional), default __keystore
- `process.env.STEEDOS_CSFLE_MONGO_URL`: Key vault connection string (optional), default MONGO_URL

## How to enable field encryption

- When the administrator adds a new field on the Settings-Object Details page and selects the field type as text/password, the `Encryption' checkbox will appear. After checking, the contents of the encrypted field in the newly added object record will be encrypted and saved to the database.
- Or the developer adds `enable_encryption: true` in the field `.field.yml` configuration file

## Reference documentation

- [Client-Side Field Level Encryption](https://www.mongodb.com/docs/manual/core/security-client-side-encryption/)